<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Page{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

    <!-- Lora font import -->
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet'>

    <!-- Required JS and CSS for Piano Interaction -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
    <script src="{{ url_for('static', filename='piano.js') }}"></script>

    <!-- Optional Bootstrap (only if youâ€™re using Bootstrap classes elsewhere) -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" />
</head>
    
<body>
    <nav class="navbar">
        <div class="nav-item {% if request.path == '/' %}active{% endif %}">
            <a href="/">Home</a>
        </div>
        <div class="nav-item {% if 'learn' in request.path %}active{% endif %}">
            <a href="/learn/1">Tutorial</a>
        </div>
        <div class="nav-item {% if 'quiz' in request.path %}active{% endif %}">
            <a href="/quiz/1?restart=true">Quiz</a>
        </div>

        {% if 'learn' in request.path or 'quiz' in request.path %}
            <div class="nav-item">
                Page {{ page_num }} of {{ total_pages }}
            </div>
        {% endif %}
    </nav>

    <div class="content">
        {% block content %}{% endblock %}
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            fetch("/log-entry-time", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    page: window.location.pathname,
                    timestamp: new Date().toISOString()
                })
            });
        });
    </script>

</body>
</html>

